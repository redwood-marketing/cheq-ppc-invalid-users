"use strict";var _window$measurementId;window.measurementId=null!==(_window$measurementId=window.measurementId)&&void 0!==_window$measurementId?_window$measurementId:document.currentScript.dataset.measurementId,window.formCallbacks=window.formCallbacks||[],window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}function DOMReady(a){let{readyState:b}=document;"complete"===b||"interactive"===b?a():document.addEventListener("DOMContentLoaded",a)}DOMReady(()=>{(function(){const a={get cached(){try{let a=sessionStorage.getItem("rwd-info");return a=JSON.parse(atob(a)),[...a]}catch(a){return[]}},region:[...document.getElementsByName("region")],timezone:[...document.getElementsByName("timezone")],clientId:[...document.getElementsByName("ga_client_id")],usertoken:[...document.getElementsByName("usertoken")]};!a.usertoken.length||async function(){const a=window._hsq=window._hsq||[],b=await new Promise(b=>{try{b(__hsUserToken)}catch(c){a.push(["addIdentityListener",a=>{b(__hsUserToken||a.match(/\.(\w+)\./i)[1])}])}});return b}().then(b=>{console.log(b),a.usertoken.forEach(a=>{a.value=b})}),!a.clientId.length||async function(a){return await new Promise(b=>{gtag("get",a,"client_id",a=>{const c=location.host.includes("tidalsoftware.com")?"TS":location.host.includes("finance.redwood")?"FA":"RMJ";b("".concat(c,"::").concat(a))})})}().then(b=>{a.clientId.forEach(a=>{a.value=b})}),!a.region.length&&!a.timezone.length||async function(){const{timezone:a,country:b}=await async function(){try{const a=await fetch("https://get.geojs.io/v1/ip/geo.json");if(!a.ok)throw new Error("Geo response was not OK");const b=await a.json();return{country:b.country_code,timezone:b.timezone}}catch(a){return{country:"N/A",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}}}(),c=await async function(a){try{const b=await fetch("https://redwood.com/wp-json/utilities/geo/v1/region/".concat(a));if(!b.ok)throw new Error("Region response was not OK");const c=b.json();return c}catch(a){return"NA"}}(b);return{region:c,timezone:a}}().then(b=>{let{timezone:c,region:d}=b;a.region.forEach(a=>{a.value=d}),a.timezone.forEach(a=>{a.value=c})}),!a.cached.length||a.cached.forEach(a=>{let{name:b,value:c}=a;document.getElementsByName(b).forEach(a=>{a.value=a.value||c})})})(),function(){const a=!!location.search&&new URLSearchParams(location.search),b=location.hostname.split(".").slice(-2).join("."),c=document.querySelectorAll("[href^='https://'][href*='".concat(b,"'][target='_blank']"));a&&c.forEach(b=>{b.search=(()=>{const c=new URLSearchParams(b.search);for(const[b,d]of a)c.append(b,d);return c})()})}()}),function(){formCallbacks.push(a=>{const b=new FormData(a),c=["salesforce-integration","lpsSubmissionConfig","thank-you-message","thank-you-message-timeout","redirect","hubspot-integration"];let d,e={firstName:b.get("First Name"),lastName:b.get("Last Name"),email:b.get("Company Email"),funnel:b.get("Lead Funnel"),product:b.get("Product Source"),company:{name:b.get("Company")}};d=Array.from(b,a=>{let[b,c]=a;return{name:b,value:c}}),d=d.filter(a=>{let{name:b,value:d}=a;return!!d&&!c.includes(b)}),d=JSON.stringify(d),d=btoa(d),sessionStorage.setItem("rwd-info",d),window.mutiny&&window.mutiny.client.identify(null,e).then(()=>{console.log(e)})})}();